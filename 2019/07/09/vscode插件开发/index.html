<!DOCTYPE HTML>
<html lang>
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="黄伟梁个人博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

    <meta name="keywords" content>


    <meta name="description" content="前言工欲善其事必先利其器。vscode作为优秀的开发工具，给我的日常开发工作提供了极大的便利。其拓展机制更是如此。在我们日常开发中使用太多别人开发的插件如ESlint、SFTP、Todo Tre...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>vscode插件开发 | 黄伟梁个人博客</title>


    <link rel="alternate" href="/atom.xml" title="黄伟梁个人博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>




    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?17c942ddf91b0769181a93cc8cad738c";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(/./img/header.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="huangweiliang">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 用心做好每一件事 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">黄伟梁个人博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/前端/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/后端/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/其他/"><i class="fa "></i>其他</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="vscode插件开发">
            
	            vscode插件开发
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/07/09</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>工欲善其事必先利其器。vscode作为优秀的开发工具，给我的日常开发工作提供了极大的便利。其拓展机制更是如此。在我们日常开发中使用太多别人开发的插件如ESlint、SFTP、Todo Tree等等，今天我们就来做一个自已的vscode插件。</p>
<p>Demo 指令集</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
<th>快捷键</th>
<th>右键菜单</th>
</tr>
</thead>
<tbody>
<tr>
<td>hwl-show01</td>
<td>显示info信息</td>
<td>shift+f</td>
<td>hwl-show1</td>
</tr>
<tr>
<td>hwl-show02</td>
<td>显示错误信息</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>hwl-show03</td>
<td>状态栏中显示</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>hwl-show04</td>
<td>显示对话框</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>hwl-cursorTop</td>
<td>光标回到文本头部</td>
<td></td>
<td>hwl-cursorTop</td>
</tr>
<tr>
<td>hwl-openWebview</td>
<td>打开一个html文件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>hwl-showImg</td>
<td>打开一个html文件，并显示图片</td>
<td></td>
<td></td>
</tr>
<tr>
<td>hwl-getCurrentFilePath</td>
<td>获取文件路径</td>
<td></td>
<td>hwl-getCurrentFilePath</td>
</tr>
<tr>
<td>hwl-selection</td>
<td>获取选择的是第几行到第几行</td>
<td></td>
<td>hwl-selection</td>
</tr>
<tr>
<td>hwl-aligner</td>
<td>格式化注释</td>
<td></td>
<td>hwl-aligner</td>
</tr>
</tbody>
</table>
<h3 id="一、创建帐号"><a href="#一、创建帐号" class="headerlink" title="一、创建帐号"></a>一、创建帐号</h3><p>进入<a href="https://marketplace.visualstudio.com/" target="_blank" rel="noopener">vscode 插件官网</a> 创建帐号, 用于在插件市场上发布</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode03.png" alt="img"></p>
<h3 id="二、安装脚手架工具"><a href="#二、安装脚手架工具" class="headerlink" title="二、安装脚手架工具"></a>二、安装脚手架工具</h3><p>官方推荐使用Yeoman 和 VS Code Extension Generator</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g yo generator-code		// 安装vscode插件生产工具</span><br></pre></td></tr></table></figure>
<h3 id="三、新建项目"><a href="#三、新建项目" class="headerlink" title="三、新建项目"></a>三、新建项目</h3><p>初始化项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br></pre></td></tr></table></figure>
<p>进行简单设置</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode01.png" alt="img"></p>
<p>初始化完成后的项目结构</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode02.png" width="30%" height="30%"></p>
<p>文件说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">├── .vscode      // 资源配置文件</span><br><span class="line">├── CHANGELOG.md // 更改记录文件，会展示到vscode插件市场</span><br><span class="line">├── extension.js // 拓展源代码文件</span><br><span class="line">├── jsconfig.json</span><br><span class="line">├── package.json // 资源配置文件</span><br><span class="line">├── README.md    // 插件介绍文件，会展示到vscode插件市场</span><br><span class="line">├── test         // 测试文件</span><br><span class="line">└── vsc-extension-quickstart.md</span><br></pre></td></tr></table></figure>
<h3 id="四、开发"><a href="#四、开发" class="headerlink" title="四、开发"></a>四、开发</h3><h5 id="1-package-json"><a href="#1-package-json" class="headerlink" title="1. package.json"></a>1. package.json</h5><p>告知vscode，自己定义的事件，和触发事件的方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;name&quot;: &quot;hwl-aligner&quot;,			// 插件名</span><br><span class="line">	&quot;displayName&quot;: &quot;hwl-aligner&quot;,	// 显示名称</span><br><span class="line">	&quot;description&quot;: &quot;A tool for aligning the inline trailing comment&quot;,	// 描述</span><br><span class="line">	&quot;version&quot;: &quot;0.0.4&quot;,				// 版本号</span><br><span class="line">	&quot;publisher&quot;: &quot;huangweiliang&quot;,	// 发布人，在插件市场官网创建的发布人id</span><br><span class="line">	&quot;icon&quot;: &quot;icon/icon.jpg&quot;,		// 插件图标，用于在插件市场展示的icon</span><br><span class="line">	&quot;repository&quot;: &#123;</span><br><span class="line">		&quot;type&quot;: &quot;git&quot;,</span><br><span class="line">		&quot;url&quot;:&quot;https://gitee.com/huangweiliang/hwl-vscode.git&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;engines&quot;: &#123;</span><br><span class="line">		&quot;vscode&quot;: &quot;^1.33.1&quot;			// vscode版本号</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;categories&quot;: [</span><br><span class="line">		&quot;Other&quot;						// vscode插件类别，会在插件市场的对应类别中展示</span><br><span class="line">	],</span><br><span class="line">	&quot;activationEvents&quot;: [	// &quot;*&quot; 表示在vscode启动的时候，就启动插件了。不太友好，谨慎使用。</span><br><span class="line">		&quot;onCommand:extension.hwlaligner&quot;</span><br><span class="line">	],</span><br><span class="line">	&quot;main&quot;: &quot;./extension.js&quot;,		// 插件的主入口</span><br><span class="line">	&quot;contributes&quot;: &#123;</span><br><span class="line">		&quot;commands&quot;: [&#123;				// 命令</span><br><span class="line">      		&quot;command&quot;: &quot;extension.hwlaligner&quot;,	// 插件注册的类名</span><br><span class="line">			&quot;title&quot;: &quot;Hwl Aligner&quot;				// 插件在命令面包的展示名称</span><br><span class="line">		&#125;],</span><br><span class="line">        &quot;keybindings&quot;: [			// 快捷键绑定</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;command&quot;: &quot;extension.sayHello&quot;,</span><br><span class="line">                &quot;key&quot;: &quot;shift+f10&quot;,</span><br><span class="line">                &quot;mac&quot;: &quot;shift+f10&quot;,			// mac shift+fn+f9</span><br><span class="line">                &quot;when&quot;: &quot;editorTextFocus&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;menus&quot;: &#123;					// 配置右键菜单</span><br><span class="line">			&quot;editor/context&quot;: [		// 是key值，定义这个菜单出现在哪里，详情请参考「配置自定义菜单」</span><br><span class="line">					&#123;</span><br><span class="line">							&quot;when&quot;: &quot;editorFocus&quot;,					// 控制菜单合适出现</span><br><span class="line">							&quot;command&quot;: &quot;extension.hwl007&quot;,			// 定义菜单被点击后要执行什么操作</span><br><span class="line">							// 分组 navigation是一个永远置顶的分组，后面的@6是人工进行组内排序</span><br><span class="line">							&quot;group&quot;: &quot;navigation@6&quot;	,</span><br><span class="line">							// 定义备用命令，按住alt键打开菜单时将执行对应命令(可省略)</span><br><span class="line">                            &quot;alt&quot;: &quot;markdown.showPreviewToSide&quot;</span><br><span class="line">					&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;scripts&quot;: &#123;</span><br><span class="line">		&quot;postinstall&quot;: &quot;node ./node_modules/vscode/bin/install&quot;,</span><br><span class="line">		&quot;test&quot;: &quot;node ./node_modules/vscode/bin/test&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	&quot;devDependencies&quot;: &#123;</span><br><span class="line">		&quot;typescript&quot;: &quot;^3.1.4&quot;,</span><br><span class="line">		&quot;vscode&quot;: &quot;^1.1.25&quot;,</span><br><span class="line">		&quot;eslint&quot;: &quot;^4.11.0&quot;,</span><br><span class="line">		&quot;@types/node&quot;: &quot;^8.10.25&quot;,</span><br><span class="line">		&quot;@types/mocha&quot;: &quot;^2.2.42&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置editor/context 菜单效果</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode09.png" alt="img"></p>
<h5 id="2-extension-js-程序入口"><a href="#2-extension-js-程序入口" class="headerlink" title="2. extension.js 程序入口"></a>2. extension.js 程序入口</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="built_in">require</span>(<span class="string">'vscode'</span>);		<span class="comment">// 引入文件</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">activate</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 绑定事件</span></span><br><span class="line">	<span class="keyword">let</span> disposable = vscode.commands.registerCommand(<span class="string">'extension.helloWorld'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		vscode.window.showInformationMessage(<span class="string">'Hello World123!'</span>);</span><br><span class="line"></span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	context.subscriptions.push(disposable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在插件被激活的时候，这个方法会被调用activate</span></span><br><span class="line">exports.activate = activate;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deactivate</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	activate,</span><br><span class="line">	deactivate</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-一个插件实现多条命令"><a href="#3-一个插件实现多条命令" class="headerlink" title="3. 一个插件实现多条命令"></a>3. 一个插件实现多条命令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// extension.js</span><br><span class="line">function activate(context) &#123;</span><br><span class="line">    // 实现指令1功能</span><br><span class="line">	let disposable1 = vscode.commands.registerCommand(&apos;extension.hwl1&apos;, function () &#123;</span><br><span class="line">		vscode.window.showInformationMessage(&apos;我是指令1&apos;);</span><br><span class="line">	&#125;);</span><br><span class="line">	// 实现指令2功能</span><br><span class="line">	let disposable2 = vscode.commands.registerCommand(&apos;extension.hwl2&apos;, function () &#123;</span><br><span class="line">		vscode.window.showInformationMessage(&apos;我是指令2&apos;);</span><br><span class="line">	&#125;);</span><br><span class="line">	</span><br><span class="line">	// 实现指令3功能，获取url需要把这个方法绑定在右键菜单上才有值</span><br><span class="line">	let disposable2 = vscode.commands.registerCommand(&apos;extension.getCurrentFilePath&apos;, (url) =&gt; &#123;</span><br><span class="line">        vscode.window.showInformationMessage(`当前文件(夹)路径是：$&#123;url ? url.path : &apos;空&apos;&#125;`);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">	context.subscriptions.push(disposable1);	// 加入</span><br><span class="line">	context.subscriptions.push(disposable2);	// 加入</span><br><span class="line">	context.subscriptions.push(disposable3);	// 加入</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// package.json</span><br><span class="line">// 注册命令</span><br><span class="line">&quot;commands&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">    	&quot;command&quot;: &quot;extension.hwl1&quot;,</span><br><span class="line">    	&quot;title&quot;: &quot;hwl1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">    	&quot;command&quot;: &quot;extension.hwl2&quot;,</span><br><span class="line">    	&quot;title&quot;: &quot;hwl2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="4-常用指令"><a href="#4-常用指令" class="headerlink" title="4. 常用指令"></a>4. 常用指令</h5><p>进入<a href="https://code.visualstudio.com/api/references/vscode-api" target="_blank" rel="noopener">官网API</a>查看</p>
<p>提示、显示、对话框使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vscode.window.showInformationMessage(<span class="string">'我是info信息！'</span>);</span><br><span class="line">vscode.window.showErrorMessage(<span class="string">'我是错误信息！'</span>);</span><br><span class="line">vscode.window.showInformationMessage(<span class="string">'是否打开网页？'</span>, <span class="string">'是'</span>, <span class="string">'否'</span>, <span class="string">'不再提示'</span>).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result === <span class="string">'是'</span>) &#123;</span><br><span class="line">    <span class="comment">// exec(`open 'https://haoji.me'`);</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result === <span class="string">'不再提示'</span>) &#123;</span><br><span class="line">    <span class="comment">// 其它操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">vscode.window.setStatusBarMessage(<span class="string">'状态栏中显示'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode11.png" alt="img"></p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode13.png" alt="img"></p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode12.png" alt="img"></p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode10.png" alt="img"></p>
<p>光标使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cursorTop: 移动到文章首</span><br><span class="line">cursorBottom: 移动到文章尾</span><br><span class="line">cursorRight: 光标向右移，相当于emacs的forward-char</span><br><span class="line">cursorLeft: 光标左移，相当于emacs的backward-char</span><br><span class="line">cursorDown: 向下移一行，相当于emacs的next-line</span><br><span class="line">cursorUp: 向上移一行，相当于emacs的previous-line</span><br><span class="line">cursorLineStart: 移至行首，相当于emacs的move-beginning-of-line</span><br><span class="line">cursorLineEnd: 移至行尾，相当于emacs的move-end-of-line</span><br><span class="line"></span><br><span class="line">// 使用</span><br><span class="line">vscode.commands.executeCommand(&apos;cursorTop&apos;);</span><br></pre></td></tr></table></figure>
<p>webview使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> openWebview = vscode.commands.registerCommand(<span class="string">'extension.openWebview'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> panel = vscode.window.createWebviewPanel(</span><br><span class="line">        <span class="string">'testWebview'</span>, <span class="comment">// viewType</span></span><br><span class="line">        <span class="string">"WebView演示"</span>, <span class="comment">// 视图标题</span></span><br><span class="line">        vscode.ViewColumn.One, <span class="comment">// 显示在编辑器的哪个部位</span></span><br><span class="line">        &#123;</span><br><span class="line">            enableScripts: <span class="literal">true</span>, <span class="comment">// 启用JS，默认禁用</span></span><br><span class="line">            retainContextWhenHidden: <span class="literal">true</span>, <span class="comment">// webview被隐藏时保持状态，避免被重置</span></span><br><span class="line">         &#125;</span><br><span class="line">    );</span><br><span class="line">    panel.webview.html = <span class="string">`&lt;html&gt;&lt;body&gt;你好，我是Webview&lt;/body&gt;&lt;/html&gt;`</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="5-配置自定义菜单"><a href="#5-配置自定义菜单" class="headerlink" title="5.配置自定义菜单"></a>5.配置自定义菜单</h5><p>目前插件可以给以下场景配置自定义菜单：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">资源管理器上下文菜单 - explorer/context</span><br><span class="line">编辑器上下文菜单 - editor/context</span><br><span class="line">编辑标题菜单栏 - editor/title</span><br><span class="line">编辑器标题上下文菜单 - editor/title/context</span><br><span class="line">调试callstack视图上下文菜单 - debug/callstack/context</span><br><span class="line">SCM标题菜单 -scm/title</span><br><span class="line">SCM资源组菜单 -scm/resourceGroup/context</span><br><span class="line">SCM资源菜单 -scm/resource/context</span><br><span class="line">SCM更改标题菜单 -scm/change/title</span><br><span class="line">左侧视图标题菜单 -view/title</span><br><span class="line">视图项菜单 -view/item/context</span><br><span class="line">控制命令是否显示在命令选项板中 - commandPalette</span><br></pre></td></tr></table></figure>
<h5 id="6-加载本地资源"><a href="#6-加载本地资源" class="headerlink" title="6.加载本地资源"></a>6.加载本地资源</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 加载本地图片</span><br><span class="line">// context 为上下文，即function activate(context) &#123;&#125;	</span><br><span class="line">const imgUrl = path.join(context.extensionPath, &apos;./img01.jpg&apos;)	</span><br><span class="line">const diskPath = vscode.Uri.file(imgUrl);</span><br><span class="line">const imagePath = diskPath.with(&#123; scheme: &apos;vscode-resource&apos; &#125;).toString();</span><br></pre></td></tr></table></figure>
<h5 id="7-获取编辑器内容"><a href="#7-获取编辑器内容" class="headerlink" title="7. 获取编辑器内容"></a>7. 获取编辑器内容</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 获取所有选中行信息</span><br><span class="line">let selection = vscode.window.activeTextEditor.selection;</span><br><span class="line">console.log(selection)</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode14.png" width="30%" height="30%"></p>
<h5 id="8-以文件的方式引入"><a href="#8-以文件的方式引入" class="headerlink" title="8.以文件的方式引入"></a>8.以文件的方式引入</h5><p>方法一： hwlaligner.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="built_in">require</span>(<span class="string">'vscode'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  fun: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      vscode.window.showInformationMessage(<span class="string">'hwlaligner'</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>extension.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hwlaligner = <span class="built_in">require</span>(<span class="string">'./hwlaligner'</span>)</span><br><span class="line"></span><br><span class="line">vscode.commands.registerCommand(<span class="string">'extension.hwl-aligner'</span>, hwlaligner.fun)</span><br></pre></td></tr></table></figure>
<p>方法二： hwlhttp.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="built_in">require</span>(<span class="string">'vscode'</span>);</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  vscode.window.showInformationMessage(<span class="string">'http'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>extension.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hwlhttp = <span class="built_in">require</span>(<span class="string">'./hwlhttp'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hwlHttp = vscode.commands.registerCommand(<span class="string">'extension.hwl-http'</span>, hwlhttp)</span><br></pre></td></tr></table></figure>
<h5 id="9-创建代码片段"><a href="#9-创建代码片段" class="headerlink" title="9. 创建代码片段"></a>9. 创建代码片段</h5><p><code>package.json</code>文件新增如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;contributes&quot;: &#123;</span><br><span class="line">    &quot;snippets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            // 代码片段作用于那种语言</span><br><span class="line">            &quot;language&quot;: &quot;javascript&quot;,</span><br><span class="line">            // 片段文件路径</span><br><span class="line">            &quot;path&quot;: &quot;./snippets/javascript.json&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后创建一个<code>snippets/javascript.json</code>文件，我们这里先简单点，比如创建一个for循环：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;for循环&quot;: &#123;</span><br><span class="line">        &quot;prefix&quot;: &quot;for&quot;,</span><br><span class="line">        &quot;body&quot;: [</span><br><span class="line">          &quot;for (const $&#123;2:item&#125; of $&#123;1:array&#125;) &#123;&quot;,</span><br><span class="line">          &quot;\t$0&quot;,</span><br><span class="line">          &quot;&#125;&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;description&quot;: &quot;for循环&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解释如下：</p>
<ul>
<li><code>for循环</code>：<code>snippets</code>的名字；</li>
<li><code>prefix</code>：输入什么单词触发代码片段；</li>
<li><code>body</code>：一个数组，存放代码片段的内容，每一行一个字符串；</li>
<li><code>description</code>：片段的描述；</li>
<li><code>${1:xxx}</code>占位符，数字表示光标聚焦的顺序，1表示默认光标落在这里，按下回车或者tab跳到2的位置，以此类推，<code>xxx</code>表示此位置的默认值，可省略，比如直接写<code>$3</code>；</li>
</ul>
<h5 id="10-创建一个属于自己的专属设置项"><a href="#10-创建一个属于自己的专属设置项" class="headerlink" title="10.创建一个属于自己的专属设置项"></a>10.创建一个属于自己的专属设置项</h5><p><code>package.json</code>文件新增如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&quot;contributes&quot;: &#123;</span><br><span class="line">    &quot;configuration&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">        // 显示在配置页左侧</span><br><span class="line">        &quot;title&quot;: &quot;hwl插件demo&quot;,</span><br><span class="line">        &quot;properties&quot;: &#123;</span><br><span class="line">            // 全局唯一的配置ID</span><br><span class="line">            &quot;vscodePluginDemo.yourName&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">                &quot;default&quot;: &quot;guest&quot;,</span><br><span class="line">                &quot;description&quot;: &quot;你的名字&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;vscodePluginDemo.showTip&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;boolean&quot;,</span><br><span class="line">                &quot;default&quot;: true,</span><br><span class="line">                &quot;description&quot;: &quot;启动时显示自定义欢迎页&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="11-针对上面的专属设置可以读取和修改设置"><a href="#11-针对上面的专属设置可以读取和修改设置" class="headerlink" title="11.针对上面的专属设置可以读取和修改设置"></a>11.针对上面的专属设置可以读取和修改设置</h5><p>读取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 如果没有设置，返回undefined</span><br><span class="line">const result = vscode.workspace.getConfiguration().get(&apos;vscodePluginDemo.yourName &apos;);</span><br></pre></td></tr></table></figure>
<p>修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 最后一个参数，为true时表示写入全局配置，为false或不传时则只写入工作区配置</span><br><span class="line">vscode.workspace.getConfiguration().update(&apos;vscodePluginDemo.yourName&apos;, &apos;前端艺术家&apos;, true);</span><br></pre></td></tr></table></figure>
<h3 id="五、-发布"><a href="#五、-发布" class="headerlink" title="五、 发布"></a>五、 发布</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g vsce 		// 安装打包工具</span><br></pre></td></tr></table></figure>
<ol>
<li><p>更新修改packget.json</p>
<blockquote>
<p>发布人：  publisher</p>
<p>版本号： version</p>
</blockquote>
</li>
</ol>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode04.png" width="50%" height="30%"></p>
<ol>
<li><p>更新README.md文件</p>
</li>
<li><p>打包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br></pre></td></tr></table></figure>
</li>
<li><p>打包成功后会生成一个 <code>插件名-版本.vsix</code> 文件  例： <code>hwl-vscode01-0.0.1.vsix</code></p>
</li>
<li><p>在<a href="https://marketplace.visualstudio.com/manage/publishers/" target="_blank" rel="noopener">插件市场官网</a>上传插件</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode05.png" alt="img"></p>
</li>
<li><p>选择.vsix文件上传</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode06.png" alt="img"></p>
</li>
<li><p>发布成功</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode07.png" alt="img"></p>
</li>
<li><p>可在vscode 插件中搜索到</p>
<p><img src="https://gitee.com/huangweiliang/picBed/raw/master/images/vscode/vscode08.png" alt="img"></p>
</li>
</ol>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="https://marketplace.visualstudio.com/" target="_blank" rel="noopener">vscode 插件官网</a></li>
<li><a href="https://www.jianshu.com/p/673b0a114212" target="_blank" rel="noopener">vscode插件开发实践与demo源码</a></li>
<li><a href="https://code.visualstudio.com/api/references/vscode-api" target="_blank" rel="noopener">vscode api</a></li>
<li><a href="https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html" target="_blank" rel="noopener">VSCode插件开发全攻略概览</a></li>
</ol>

    </div>
    
        <div class="reward" ontouchstart>
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            
                <span class="reward-type">
                    <img class="wechat" src="../../../../img/reward-wepay.jpg"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">赞赏是不耍流氓的鼓励</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href target="_blank">HuangWeiLiang</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
    
        <a href="/2019/07/09/nodejs实现脚手架/" class="next-post btn btn-default" title="nodejs实现脚手架">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">nodejs实现脚手架</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'rCmbafal7DVFVWvGPCes5hrS-gzGzoHsz',
            appKey: 'UNq94EexLuc135yINegXz3sg',
            placeholder: '说点什么吧',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: ''.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一、创建帐号"><span class="toc-text">一、创建帐号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、安装脚手架工具"><span class="toc-text">二、安装脚手架工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、新建项目"><span class="toc-text">三、新建项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、开发"><span class="toc-text">四、开发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-package-json"><span class="toc-text">1. package.json</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-extension-js-程序入口"><span class="toc-text">2. extension.js 程序入口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-一个插件实现多条命令"><span class="toc-text">3. 一个插件实现多条命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-常用指令"><span class="toc-text">4. 常用指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-配置自定义菜单"><span class="toc-text">5.配置自定义菜单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-加载本地资源"><span class="toc-text">6.加载本地资源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-获取编辑器内容"><span class="toc-text">7. 获取编辑器内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-以文件的方式引入"><span class="toc-text">8.以文件的方式引入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-创建代码片段"><span class="toc-text">9. 创建代码片段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-创建一个属于自己的专属设置项"><span class="toc-text">10.创建一个属于自己的专属设置项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-针对上面的专属设置可以读取和修改设置"><span class="toc-text">11.针对上面的专属设置可以读取和修改设置</span></a></li></ol></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#五、-发布"><span class="toc-text">五、 发布</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019
                </span> |
                <span>
                    huangweiliang
                </span>
            </div>
        </div>
    </div>
</div>






    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>