---
title: 阿里云服务器使用总结
date: 2019-05-07 18:27:43
tags: 后端
---


# 阿里云服务器使用总结



### 前言

开发中避免不了要与服务器打交道，作为一个大前端代码的部署也是必备的知识，阿里云是现在使用比较广的，所以选择阿里云服务器来学习实践。 以下是本人在使用中做的一点点总结，有不足的地方或者不正确的地方，欢迎评论指出。



## 一、使用到的环境

1. 阿里云ECS服务器
2. git
3. node
4. mac
5. mysql
6. nginx



## 二、应用软件

#### 2.1 FileZilla

#### 2.2 oss-browser

[授权教程1](https://github.com/aliyun/oss-browser/blob/master/docs/authToken.md)

[授权教程2](https://newsn.net/say/aliyun-oss-accesskeyid.html)

AccessKeyId和AccessKeySecret获取地址：

```
https://ram.console.aliyun.com/#/user/list?guide
```

#### 2.3 Xshell 5  (window版)

## 三、快速搭建网站流程

#### 3.1 购买阿里云ECS服务器

资源：

​	镜像： CentOS 7.x 64位

如果服务器已安装其他镜像也可以进入更换

​	（1）进入实例列表，选择对应的实例进行停止服务

​	（2）更多 --> 磁盘和镜像 --> 更换系统盘

![image-20181127175842204](/images/nginx01.png)

#### 3.2 安装nginx

```
yum install -y nginx	    	//安装nginx
nginx			            	//启动nginx
systemctl start nginx.service	//启动nginx
nginx -s reload	          		//重启nginx
killall nginx	            	//停止nginx
nginx -v		              	//查看版本
nginx -V		              	//查看详细信息
rpm -ql nginx					//查看Nginx的安装目录
netstat -tlnp					//查看端口号的占用情况
```

静态资源路径： 

```javascript
/usr/share/nginx/html/
```

nginx配置文件路径：

```
/etc/nginx
```

此时可通过公网IP查看nginx初始化网页



#### 3.3 使用工具连接服务器

（1）MAC 终端连接

​	ssh root@xx.xx.xxx.xx		(xx.xx.xxx.xx	为公网IP)

​	连接阿里云服务器报错WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! 解决方法：[地址](https://segmentfault.com/a/1190000008679848)



（2）FileZilla 下载地址：

```
https://filezilla-project.org/
```

连接：

![image-20181127215608594](/images/FileZilla01.png)



![image-20181127215608594](/images/FileZilla02.png)



#### 3.4 上传代码到服务器

​	文件目录： /usr/share/nginx/html/

##### （1）通过FileZilla上传

本地站点选择本地需要发布的代码，远程站点选择需要上传到的路径，在本地资源中右键打开菜单点击上传，即可完成项目的发布。

​	![image-20181127215608594](/images/FileZilla03.png)



##### （2）通过VScode 插件（SFTP）上传

​	SFTP配置(fn+f1打开： SFTP:Config)

```javascript
{
    "protocol": "sftp",
    "host": "47.75.170.0",					// 公网IP
    "port": 22,
    "username": "root",
    "password": "123",						//登录密码
    "remotePath": "/usr/local/www/demo",	//文件路径
    "syncMode":"update",
    "uploadOnSave": true
}

```

​	上传（fn+f1打开： SFTP：Upload Project）



#### 3.5 域名购买

（1）[阿里云地址](https://wanwang.aliyun.com/domain/)

（2）挑选中意域名进行购买

（3）域名持有者为个人

（4）填写域名持有者信息



#### 3.6 配置域名解析

（1）[阿里云地址](https://dns.console.aliyun.com/#/dns/domainList)

（2）配置

![image-20181127231645842](/images/dns01.png)

(3) 添加成功后，您可以通过以下域名访问您的网站：www.bu **  in.online (需备案的域名才能正常访问)



#### 3.7 域名备案

#### 3.8 申请https请求





## 四、开放端口权限（又称添加安全组规则）

1. 登录 [云服务器ECS管理控制台](https://ecs.console.aliyun.com/#/home)。
2. 在左侧导航栏中，选择 网络和安全 > 安全组。
3. 选择地域。
4. 找到要配置授权规则的安全组，在 操作 列中，单击 配置规则。
5. 在 安全组规则 页面上，单击 添加安全组规则。

[教程](https://help.aliyun.com/document_detail/25471.html)





## 五、SVN搭建

```javascript
/var/svn/svnrepos						//以这个路径做为示例可任意修改
yum install subversion					//安装
svnadmin create /var/svn/svnrepos		//创建版本库
rm -rvf /var/svn/svnrepos				//删除版本库
/var/svn/svnrepos/conf/					//配置文件所在的文件夹
authz文件								  //配置用户组以及用户组权限
passwd文件							  //配置用户名和密码
svnserve.conf文件						  //配置默认权限、权限配置文件及密码配置文件
svnserve -d -r /var/svn/svnrepos		//启动SVN
```



## 六、nginx配置



```
server{
    listen 8001;							// 端口号
    server_name localhost;					// 域名
    root /usr/share/nginx/html/html8001;	// 文件路径
    index index.html;						// 
}
```

也可以配置IP

```
server{
    listen 80;
    server_name 112.74.164.244;
    root /usr/share/nginx/html/html8001;
    index index.html;
}
```





## 七、数据库MySql

[安装参考资料](https://help.aliyun.com/document_detail/116727.html)

##### Mac 平台MySQL连接工具Sequel Pro

[基本使用](https://blog.csdn.net/lonelymanontheway/article/details/79418906)

连接数据库

![图片](/images/sql04.png)

界面介绍

![图片](/images/sql05.png)

[导入sql文件](https://zhidao.baidu.com/question/985373253463808219.html)

<img src="/images/sql02.png" width="50%" height="50%">

执行sql语名

![图片](/images/sql01.png)

##### MYSQL 数据库表中存入汉字方法

> [解决存入汉字失败](https://blog.csdn.net/KarenChen666/article/details/80790913)

<img src="/images/sql03.png" width="50%" height="50%">





## 八、node服务

#### 8.1 node 安装

> [参考资料1](https://www.jianshu.com/p/7aad651bdbb4)
>
> [参考资料2](https://help.aliyun.com/document_detail/50775.html)



#### 8.2 pm2

pm2是一个带有负载均衡功能的应用进程管理器，类似有[Supervisor](https://link.jianshu.com/?t=https://blog.linuxeye.cn/408.html)，forever。

> [pm2使用](https://www.jianshu.com/p/93d43911f91e)

```
1. 安装pm2
$ npm install -g pm2

2. 启动
$ pm2 start app.js     // 如果端口未开放，需到阿里云控制台配置安全组规则

3. 查看进程
$ pm2 list

4. 监控
$ pm2 monit


```







### 参考资料

1. [阿里云官网](https://www.aliyun.com/)
2. [搭建LNMP环境（CentOS 6）教程](https://help.aliyun.com/document_detail/50700.html)
3. [部署Node.js项目（CentOS）教程](https://help.aliyun.com/document_detail/50775.html)
4. [一个前端必会的 Nginx免费教程](http://jspang.com/post/nginx.html)
5. [使用MySQL数据库](https://help.aliyun.com/document_detail/116727.html)
6. [Mac 平台 MySQL连接工具 Sequel Pro 使用经验之谈](https://blog.csdn.net/lonelymanontheway/article/details/79418906)
7. [sequel pro 怎样导入数据](https://zhidao.baidu.com/question/985373253463808219.html)
8. [MYSQL 数据库表中存入汉字方法](https://blog.csdn.net/KarenChen666/article/details/80790913)